{"version":3,"sources":["whynotoib.js"],"names":["haveDone","navigator","userAgent","showOIB","elem","document","createElement","innerHTML","body","appendChild","setTimeout","getElementById","className","hideOIB","addEventListener","arguments","length","undefined"],"mappings":"AAAA,cAEA,WAyCI,IAAIA,GAAW,EAmCJC,UAAPC,UAGJ,SAASC,IACL,IAAIH,EAAJ,CACA,IAAII,EAAOC,SAASC,cAAc,OAClCF,EAAKG,UAzCLP,itBA0CAK,SAASG,KAAKC,YAAYL,GAC1BM,WAAW,WAAQL,SAASM,eAAe,aAAaC,UAAY,cAAiB,KACrFF,WAAW,WAAQG,GAAQ,IAAW,KACtCR,SAASM,eAAe,iBAAiBG,iBAAiB,QAAS,WAAQD,GAAQ,KACnFb,GAAW,GAGf,SAASa,OAAuB,EAAAE,UAAAC,aAAAC,IAAAF,UAAA,KAAAA,UAAA,MAExBV,SAASM,eAAe,aAAaC,UAAY,WAErDP,SAASM,eAAe,aAAaC,UAAY,GARjDT,IAtFR","file":"whynotoib.min.js","sourcesContent":["\"use strict\";\n\n(function () {\n\n    // Constants\n    let page = `\n<style>\n#whynotOIB {\n    transition: opacity .3s ease-in-out;\n    top: 20px; \n    width: 85%; \n    position: fixed; \n    opacity: 0;\n    left: 7.5%;\n    border: dashed 1px;\n    background: white;\n    text-align: center;\n    z-index: 31;\n}\n\n#whynotOIB.oibDisplay {\n    opacity: 1\n}\n\n#whynotOIB.noTrans {\n    transition: none;\n}\n\n#whynotOIB .grey {\n    color: grey\n}\n</style>\n\n<div id=\"whynotOIB\">\n  <h2>你好。</h2>\n  <p>为什么不试试用你的浏览器（而不是微信）访问这里呢？</p>\n  <p>点击右上角的三个点，然后选择“在浏览器中打开”。</p>\n  <p>这能更好地保护你的隐私，也许还能更好地保护互联网。</p>\n  <p>[<a href=\"//librehs.github.io/whynotoib/\">为什么?</a>] [<a id=\"hideOIBRegBox\" class=\"grey\">立即隐藏</a>] <br />\n  <span class=\"grey\">（我们会在显示7秒后自动隐藏。）</span></p>\n</div>\n`\n\n    let haveDone = false;\n    let ua = navigator.userAgent;\n    let uaList = [\n        /(M|m)icro(M|m)essenger/,\n        /TIM\\//,\n        /QQ\\//\n    ];\n    let objectList = [\n        \"WeixinJSBridge\"\n    ]\n    let eventList = [\n        \"WeixinJSBridgeReady\"\n    ]\n\n    // Execution\n\n    if (1 || searchObject() || searchUa()) {\n        showOIB();\n    } else {\n        for (i of eventList) document.addEventListener(i, () => { showOIB(); })\n    }\n\n    // Functions\n\n    function searchObject() {\n        for (i of objectList) {\n            if (window[i]) return true;\n        }\n        return false;\n    }\n\n    function searchUa() {\n        for (i of uaList) {\n            if (ua.search(i) !== -1) return true;\n        }\n        return false;\n    }\n\n    function showOIB() {\n        if (haveDone) return;\n        let elem = document.createElement(\"div\");\n        elem.innerHTML = page;\n        document.body.appendChild(elem);\n        setTimeout(() => { document.getElementById('whynotOIB').className = \"oibDisplay\"; }, 1000);\n        setTimeout(() => { hideOIB(false); }, 8000);\n        document.getElementById('hideOIBRegBox').addEventListener('click', () => { hideOIB(true) });\n        haveDone = true;\n    }\n\n    function hideOIB(sudden = true) {\n        if (sudden) {\n            document.getElementById('whynotOIB').className = \"noTrans\";\n        }\n        document.getElementById('whynotOIB').className = \"\";\n    }\n})()"]}
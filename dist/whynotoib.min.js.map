{"version":3,"sources":["whynotoib.js"],"names":["haveDone","ua","navigator","userAgent","uaList","objectList","page","document","hideOIB","_arr2","getElementById","window","i","_arr3","_i4","length","search","searchUa","showOIB","_i","_arr","addEventListener","elem","createElement","innerHTML","body","appendChild","setTimeout","className","arguments","undefined"],"mappings":"AAAA,cAEA,WAyCI,IAAIA,GAAW,EAmCXC,EAAOC,UAAPC,UACHC,EAAA,CAjCG,yBAmCJ,QACQJ,QAEAK,EAAaC,CACjBC,kBAG2EC,GAK3E,WACID,IADQ,IAAAE,EACCC,EAATH,EAAAA,EAAAA,EAAAA,EAAAA,OAAAA,IAAwB,CAAxBA,IAASG,EAAAA,EAAAA,GACZ,GAAAC,OAAAC,GAAA,OAAA,EACDL,OAASG,EARkEF,IAd/E,WACI,IADgB,IAAAK,EACFT,EAAdU,EAAA,EAAAA,EAAAD,EAAAE,OAAAD,IAAsB,CAAjB,IAAIF,EAACC,EAAAC,GACN,IAAsB,IAAlBb,EAAGe,OAAOJ,GAAW,OAAO,EAEpC,OAAO,EAUoEK,GAA3EC,SAEH,IADGlB,IAAAA,EAH4BU,CAAyD,uBAIxFS,EAAA,EAAAA,EAAAC,EAAAL,OAAAI,IAAA,CAAA,IAAAP,EAAAQ,EAAAD,GAAAZ,SAAAc,iBAAAT,EAAA,WAAAM,MATD,SAASA,IACL,IAAIlB,EAAJ,CACA,IAAIsB,EAAOf,SAASgB,cAAc,OAClCD,EAAKE,UAzCLxB,itBA0CAO,SAASkB,KAAKC,YAAYJ,GAC1BK,WAAW,WAAQpB,SAASG,eAAe,aAAakB,UAAY,cAAiB,KACrFD,WAAW,WAAQnB,GAAQ,IAAW,KACtCD,SAASG,eAAe,iBAAiBW,iBAAiB,QAAS,WAAQb,GAAQ,KACnFR,GAAW,GAGf,SAASQ,OAAuB,EAAAqB,UAAAd,aAAAe,IAAAD,UAAA,KAAAA,UAAA,MAExBtB,SAASG,eAAe,aAAakB,UAAY,WAErDrB,SAASG,eAAe,aAAakB,UAAY,IA9FzD","file":"whynotoib.min.js","sourcesContent":["\"use strict\";\n\n(function () {\n\n    // Constants\n    let page = `\n<style>\n#whynotOIB {\n    transition: opacity .3s ease-in-out;\n    top: 20px; \n    width: 85%; \n    position: fixed; \n    opacity: 0;\n    left: 7.5%;\n    border: dashed 1px;\n    background: white;\n    text-align: center;\n    z-index: 31;\n}\n\n#whynotOIB.oibDisplay {\n    opacity: 1\n}\n\n#whynotOIB.noTrans {\n    transition: none;\n}\n\n#whynotOIB .grey {\n    color: grey\n}\n</style>\n\n<div id=\"whynotOIB\">\n  <h2>你好。</h2>\n  <p>为什么不试试用你的浏览器（而不是微信）访问这里呢？</p>\n  <p>点击右上角的三个点，然后选择“在浏览器中打开”。</p>\n  <p>这能更好地保护你的隐私，也许还能更好地保护互联网。</p>\n  <p>[<a href=\"//librehs.github.io/whynotoib/\">为什么?</a>] [<a id=\"hideOIBRegBox\" class=\"grey\">立即隐藏</a>] <br />\n  <span class=\"grey\">（我们会在显示7秒后自动隐藏。）</span></p>\n</div>\n`\n\n    let haveDone = false;\n    let ua = navigator.userAgent;\n    let uaList = [\n        /(M|m)icro(M|m)essenger/,\n        /TIM\\//,\n        /QQ\\//\n    ];\n    let objectList = [\n        \"WeixinJSBridge\"\n    ]\n    let eventList = [\n        \"WeixinJSBridgeReady\"\n    ]\n\n    // Execution\n\n    if (searchObject() || searchUa()) {\n        showOIB();\n    } else {\n        for (let i of eventList) document.addEventListener(i, () => { showOIB(); })\n    }\n\n    // Functions\n\n    function searchObject() {\n        for (let i of objectList) {\n            if (window[i]) return true;\n        }\n        return false;\n    }\n\n    function searchUa() {\n        for (let i of uaList) {\n            if (ua.search(i) !== -1) return true;\n        }\n        return false;\n    }\n\n    function showOIB() {\n        if (haveDone) return;\n        let elem = document.createElement(\"div\");\n        elem.innerHTML = page;\n        document.body.appendChild(elem);\n        setTimeout(() => { document.getElementById('whynotOIB').className = \"oibDisplay\"; }, 1000);\n        setTimeout(() => { hideOIB(false); }, 8000);\n        document.getElementById('hideOIBRegBox').addEventListener('click', () => { hideOIB(true) });\n        haveDone = true;\n    }\n\n    function hideOIB(sudden = true) {\n        if (sudden) {\n            document.getElementById('whynotOIB').className = \"noTrans\";\n        }\n        document.getElementById('whynotOIB').className = \"\";\n    }\n})()\n"]}